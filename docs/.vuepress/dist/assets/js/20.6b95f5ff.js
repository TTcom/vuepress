(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{179:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h3",{attrs:{id:"ä½¿ç”¨-vue-transition-å®ç°é«˜åº¦æ¸å˜åŠ¨ç”»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-vue-transition-å®ç°é«˜åº¦æ¸å˜åŠ¨ç”»","aria-hidden":"true"}},[t._v("#")]),t._v(" ä½¿ç”¨ Vue Transition å®ç°é«˜åº¦æ¸å˜åŠ¨ç”»")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[a("span",{staticStyle:{color:"#999","font-weight":"initial"}},[a("a",{attrs:{href:"https://blogs.vicsdf.com/article/638#"}},[t._v("åŸæ–‡é“¾æ¥")])]),t._v(" ğŸ‰ ğŸ’¯")]),t._v(" "),a("p")]),t._v(" "),a("p",[t._v('CSS Transition ä¸­çš„é«˜åº¦ä» 0 åˆ° auto ä»¥åŠä» auto åˆ° 0 æ˜¯ä¸ªè‰°éš¾çš„ä»»åŠ¡ï¼ˆç›¸æ¯”äºå…¶å®ƒå±æ€§çš„ transition è€Œè¨€ï¼‰ï¼ŒåŸå› ä¹Ÿå¾ˆç®€å•ï¼šå°±æ˜¯æµè§ˆå™¨ä¸æ”¯æŒæ­¤ç±» CSS åŠ¨ç”»ï¼Œæ— è®ºåœ¨ä½•ç§æƒ…å†µä¸‹ï¼Œå®ƒéƒ½ä¸ä¼šæˆåŠŸã€‚\nä½†æ˜¯é«˜åº¦æ¸å˜æ˜¯ä¸ªå¾ˆå¸¸ç”¨çš„åŠ¨ç”»æ•ˆæœï¼Œå¦‚æœç»•è¿‡çº¯ CSS height å±æ€§ï¼Œæœ‰å¦‚ä¸‹æ–¹å¼æ¥å®ç°ï¼š\nä½¿ç”¨ max-height å±æ€§ï¼Œä¸ºå…ƒç´ è®¾ç½®ä¸€ä¸ªä¸å¯èƒ½è¾¾åˆ°çš„æœ€å¤§é«˜åº¦ï¼Œç„¶åå°† transition è½¬æ¢ä¸º max-height ä» 0 åˆ°æŸä¸ªå›ºå®šçš„å€¼ï¼› ä½¿ç”¨ transform: scaleY å®ç°ï¼› ä½¿ç”¨ JavaScript åŠ¨ç”»ã€‚\nä¸Šé¢çš„è§£å†³æ–¹æ¡ˆéƒ½ä»æŸç§ç¨‹åº¦ä¸Šè§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå„æœ‰å„çš„é™åˆ¶äºç¼ºç‚¹ï¼š\nä½¿ç”¨ max-height ä¼šé€ æˆåŠ¨ç”»æ•ˆæœä¸é¢„æœŸæœ‰äº›è®¸å‡ºå…¥ï¼ˆåŠ é€Ÿä¸å»¶è¿Ÿï¼‰ï¼Œå®é™…ä½“éªŒæ˜¯ï¼Œå®ƒä¸å®é™… height åŒºåˆ«è¶Šå¤§ï¼Œè¿™ç§æ„Ÿè§‰å°±ä¼šè¶Šæ˜æ˜¾ï¼ŒåŸå› ä¹Ÿå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå› ä¸º transition çš„èµ·ç‚¹ä¸ç»ˆç‚¹å‡ä¸åœ¨å®é™…çš„èµ·ç‚¹ä¸ç»ˆç‚¹ä¸Šï¼› ä½¿ç”¨ scaleY æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šä¸€æ˜¯åŠ¨æ•ˆä¸é«˜åº¦æ¸å˜ä¸ä¸€æ ·ï¼Œå…ƒç´ çš„å†…å®¹çœ‹ä¸Šå»æ˜¯è¢«å‹ç¼©äº†ï¼ˆè€Œä¸æ˜¯è¢«æ”¶èµ·æˆ–å±•å¼€ï¼‰ï¼Œè¿™ä¸ªå€’å¯ä»¥å¿è€ã€‚å¯æ¶çš„æ˜¯ç¬¬äºŒç‚¹ï¼Œå®ƒè™½ç„¶çœ‹èµ·æ¥æ˜¯æ¸å˜äº†ï¼Œç„¶è€Œé«˜åº¦å´å¹¶æ²¡æœ‰è¢«æ¸å˜ï¼æ„æ€æ˜¯ï¼Œåœ¨å®ƒä¸‹é¢çš„å…ƒç´ ä¼šåœ¨åŠ¨ç”»ç»“æŸå"è·³"åˆ°å¦ä¸€ä¸ªä½ç½®è€Œä¸æ˜¯å¹³æ»‘åœ°æ¸å˜åˆ°è¿™ä¸ªä½ç½®ï¼› ä½¿ç”¨ JavaScript åŠ¨ç”»å…¶å®å·²ç»å¯ä»¥å®Œç¾åœ°å®ç°é«˜åº¦æ¸å˜äº†ï¼Œç„¶è€Œï¼Œé—®é¢˜æ˜¯æˆ‘ä»¬éœ€è¦å¼•å…¥é¢å¤–çš„ lib æ¥åšæˆè¿™ä»¶äº‹ï¼Œæˆ‘å¯æ²¡å¿ƒæƒ…çº¯ js æ‰‹å†™åŠ¨ç”»ã€‚\næ‰€ä»¥ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯ï¼š\nä½¿ç”¨ css transition å®ŒæˆåŠ¨ç”»ï¼› åŠ¨ç”»æ•ˆæœå¿…é¡»å®Œç¾ï¼› ä¸ vue transition ç»„ä»¶é›†æˆã€‚\nè¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¾ˆè‰°éš¾çš„ä»»åŠ¡ã€‚ç»è¿‡äº†å¤§é‡çš„å¤±è´¥å°è¯•ï¼Œæœ€ç»ˆè¿˜æ˜¯ google æ•‘äº†æˆ‘ã€‚ã€‚ä¸‹é¢å…ˆç›´æ¥ä¸Šè§£å†³æ–¹æ¡ˆã€‚\ncss éƒ¨åˆ†éå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒä¸å¯ä»¥å®Œæˆä» 0 åˆ° auto çš„æ¸å˜ï¼Œå´å¯ä»¥å®Œæˆä» 0 åˆ°å›ºå®šå€¼çš„æ¸å˜ï¼Œå› æ­¤ï¼Œæ€è·¯æ˜¯æ¸å˜ä»ç”± css å®Œæˆï¼Œä½†ä¼šé€šè¿‡é’©å­ç»™å…ƒç´ åšäº›é­”æ³•æ“ä½œï¼š')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collapse "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  transition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" height "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".3")]),t._v("s ease"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  overflow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hidden"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä¸‹é¢æ˜¯é‡ç‚¹ vue transition éƒ¨åˆ†ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'auto'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// noinspection JSSuspiciousNameCombination")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" endWidth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getComputedStyle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0px'")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// force repaint")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// noinspection JSSuspiciousNameCombination")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" endWidth\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEnter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("leave")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getComputedStyle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// force repaint")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0px'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterLeave")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™äº›é’©å­å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š\nenter ä¼šåœ¨å…ƒç´ ä»æ— åˆ°æœ‰çš„æ—¶å€™è§¦å‘ï¼Œå³æˆ‘ä»¬æœŸæœ›çš„é«˜åº¦ä» 0 åˆ° auto çš„æ—¶å€™ï¼› afterEnter ä¼šåœ¨ enter ç»“æŸåè§¦å‘ï¼› leave ä¼šåœ¨å…ƒç´ ä»æœ‰åˆ°æ— ï¼Œå³é«˜åº¦ä» auto åˆ° 0 çš„æ—¶å€™è§¦å‘ï¼› afterLeave åŒç†\nè¿™äº›é’©å­å†…çš„ä»£ç çœŸçš„å¾ˆé­”æ€§ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š\nenter\nè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå…ƒç´ å®é™…ä¸Šå·²ç»è¢«æ’å…¥åˆ° dom ä¸­ï¼ˆ v-if ï¼‰æˆ–è€… display å±æ€§ä¸ä¸º none äº†ï¼ˆ v-show ï¼‰ï¼Œå› æ­¤ï¼Œæ˜¯å¯ä»¥è·å–åˆ°å®ƒçš„å®é™…é«˜åº¦çš„ã€‚\nå…ˆå°†å…¶é«˜åº¦è®¾ç½®ä¸º autoï¼Œç„¶åé€šè¿‡ getComputedStyle æ–¹æ³•æ¥è·å–å…¶å®é™…é«˜åº¦ï¼› å°†å…¶é«˜åº¦è®¾ç½®ä¸º 0ï¼› å°†å…¶é«˜åº¦è®¾ç½®ä¸ºç¬¬ä¸€æ­¥å–å¾—çš„å®é™…é«˜åº¦ã€‚\nä½†æ˜¯ï¼è¿™ä¹ˆåšæœ‰ä¸ªè‡´å‘½é—®é¢˜ï¼Œæˆ‘æ˜¯åœ¨åŒä¸€ä¸ªæ–¹æ³•å†…åŒæ­¥å®Œæˆè¿™äº›æ­¥éª¤çš„ï¼Œå› æ­¤ï¼Œç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥æ‰§è¡Œçš„ç»“æœçœ‹èµ·æ¥å°±åƒè·³è¿‡äº†ç¬¬äºŒæ­¥è€Œåªæ‰§è¡Œäº†ç¬¬ä¸‰æ­¥ä¸€æ ·ï¼Œè¿™æ ·å°±æ²¡æœ‰é«˜åº¦ä» 0 åˆ°æŸä¸ªå€¼çš„è¿‡ç¨‹ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰æ¸å˜åŠ¨ç”»äº†ã€‚\né‡ç‚¹ï¼\nè¿™é‡Œè¯´çš„é­”æ³•ï¼Œå®é™…ä¸Šå°±æ˜¯é‚£ä¸€å¥çœ‹ä¼¼å•¥éƒ½æ²¡åšçš„ el.offsetHeightï¼Œå®ƒä½¿æµè§ˆå™¨å¼ºåˆ¶è¿›å…¥äº†ä¸€ä¸ª repaint æµç¨‹ã€‚è‡³äºå®ƒä¸ºä»€ä¹ˆèƒ½å®ç°è¿™ä¸ªåŠŸèƒ½ï¼ŒçœŸçš„ä¸å¤ªæ¸…æ¥šï¼Œgoogle ä¸€æ³¢ä¹Ÿåªæ˜¯çŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæˆ‘ä»¬ç”šè‡³ä¸ç”¨ç»™å®ƒèµ‹å€¼ï¼Œåªè¦å¼•ç”¨ä¸€æ¬¡å°±è¡Œäº†ã€‚å¯ä»¥çœ‹åšä¸€ä¸ªéå¸¸ç¥å¥‡çš„æŠ€å·§ã€‚å®æµ‹åœ¨ IE 10 ä»¥ä¸Š / Chrome / Firefox / Safari ä¸Šå‡èƒ½å·¥ä½œã€‚\nå› æ­¤ï¼Œenter çš„æµç¨‹å˜ä¸ºï¼š\nå…ˆå°†å…¶é«˜åº¦è®¾ç½®ä¸º autoï¼Œç„¶åé€šè¿‡ getComputedStyle æ–¹æ³•æ¥è·å–å…¶å®é™…é«˜åº¦ï¼› å°†å…¶é«˜åº¦è®¾ç½®ä¸º 0ï¼› å¼ºåˆ¶æµè§ˆå™¨é‡ç»˜ï¼› å°†å…¶é«˜åº¦è®¾ç½®ä¸ºç¬¬ä¸€æ­¥å–å¾—çš„å®é™…é«˜åº¦ã€‚\nè¿™æ ·åŠ¨ç”»å°±æˆåŠŸæ‰§è¡Œäº†ï¼\nè§£äº† enter è¿‡ç¨‹ï¼Œå‰©ä¸‹çš„ afterEnter / leave / afterLeave é’©å­ï¼Œé‡Œé¢çš„å†…å®¹å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚\nå›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹å®ç°åŸç†å…¶å®å¾ˆç®€å•ç²—æš´ï¼Œå› æ­¤ï¼Œé™¤äº†åœ¨ vue ä¸Šé¢å¯ä»¥è¿™ä¹ˆç©ï¼Œå…¶å®å…¶ä»–æ”¯æŒ css transition çš„æ¡†æ¶è‚¯å®šä¹Ÿæ˜¯å¯ä»¥çš„ï¼ˆå¦‚ angular ä¸­æœ‰ ngAnimate å¯ä»¥å®ç°ï¼‰ï¼Œæœ€ç»ˆè¾¾åˆ°çš„åŠ¨ç”»æ•ˆæœååˆ†å®Œç¾ï¼Œå¹¶ä¸”æ²¡æœ‰å€ŸåŠ©ä¸»æ¡†æ¶ä»¥å¤–çš„ä»»ä½•é¢å¤– js åº“ã€‚")])])}],!1,null,null,null);s.default=e.exports}}]);